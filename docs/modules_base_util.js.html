<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>modules/base/util.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="LY.html">LY</a></li></ul><h3>Modules</h3><ul><li><a href="module-Ajax.html">Ajax</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Ajax.html#.filterHTML">filterHTML</a></li><li data-type='method' style='display: none;'><a href="module-Ajax.html#.formatData">formatData</a></li><li data-type='method' style='display: none;'><a href="module-Ajax.html#.formatParam">formatParam</a></li><li data-type='method' style='display: none;'><a href="module-Ajax.html#.load">load</a></li><li data-type='method' style='display: none;'><a href="module-Ajax.html#.req">req</a></li><li data-type='method' style='display: none;'><a href="module-Ajax.html#.request">request</a></li><li data-type='method' style='display: none;'><a href="module-Ajax.html#.upload">upload</a></li></ul></li><li><a href="module-Extend.html">Extend</a></li><li><a href="module-Util.html">Util</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Util.html#.calStringLength">calStringLength</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.class2type">class2type</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.compare">compare</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.debounce">debounce</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.decode">decode</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.deepClone">deepClone</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.encode">encode</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.eval">eval</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.exitFullScreen">exitFullScreen</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.getURLSearchParams">getURLSearchParams</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.isArrayLike">isArrayLike</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.isFunction">isFunction</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.isWindow">isWindow</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.proxyToJSON">proxyToJSON</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.setTimeout">setTimeout</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.throttle">throttle</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.toArray">toArray</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.toFullScreen">toFullScreen</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.toLowerUpper">toLowerUpper</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.type">type</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#.updateURLSearchParams">updateURLSearchParams</a></li><li data-type='method' style='display: none;'><a href="module-Util.html#~convertImageToBase64">convertImageToBase64</a></li></ul></li><li><a href="module-VC.html">VC</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-VC.html#.formatPath">formatPath</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.handleCSSRules">handleCSSRules</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.handleCSSStyleRule">handleCSSStyleRule</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.handleStyleNodeItem">handleStyleNodeItem</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.importScript">importScript</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.importStyle">importStyle</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.importViewComponent">importViewComponent</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.imports">imports</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseComponentName">parseComponentName</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseComponentNode">parseComponentNode</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseComponentNormalNode">parseComponentNormalNode</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseComponentPackageNode">parseComponentPackageNode</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseFileNode">parseFileNode</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseScriptNode">parseScriptNode</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseStyleNode">parseStyleNode</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseTemplateNode">parseTemplateNode</a></li><li data-type='method' style='display: none;'><a href="module-VC.html#.parseViewComponent">parseViewComponent</a></li></ul></li></ul><h3>Classes</h3><ul><li><a href="CanvasMark.html">CanvasMark</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CanvasMark.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#calcPosition">calcPosition</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#drawFont">drawFont</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="CanvasMark.html#render">render</a></li></ul></li><li><a href="CdataSectionNode.html">CdataSectionNode</a></li><li><a href="Checkbox.html">Checkbox</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Checkbox.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#findItem">findItem</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#formatList">formatList</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#load">load</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#on">on</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#setAllItem">setAllItem</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#setLabel">setLabel</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#setList">setList</a></li><li data-type='method' style='display: none;'><a href="Checkbox.html#updateCheckItem">updateCheckItem</a></li></ul></li><li><a href="CommentNode.html">CommentNode</a></li><li><a href="Component.html">Component</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Component.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="Component.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="Component.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="Component.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="Component.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="Component.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="Component.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="Component.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="Component.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="Component.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="Component.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="Component.html#_send_msg">_send_msg</a></li></ul></li><li><a href="DropList.html">DropList</a><ul class='methods'><li data-type='method' style='display: none;'><a href="DropList.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="DropList.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="DropList.html#findItem">findItem</a></li><li data-type='method' style='display: none;'><a href="DropList.html#formatList">formatList</a></li><li data-type='method' style='display: none;'><a href="DropList.html#getCheckItem">getCheckItem</a></li><li data-type='method' style='display: none;'><a href="DropList.html#init">init</a></li><li data-type='method' style='display: none;'><a href="DropList.html#load">load</a></li><li data-type='method' style='display: none;'><a href="DropList.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="DropList.html#on">on</a></li><li data-type='method' style='display: none;'><a href="DropList.html#setLabel">setLabel</a></li><li data-type='method' style='display: none;'><a href="DropList.html#setList">setList</a></li><li data-type='method' style='display: none;'><a href="DropList.html#updateCheckItem">updateCheckItem</a></li></ul></li><li><a href="ElementNode.html">ElementNode</a></li><li><a href="EventBus.html">EventBus</a><ul class='methods'><li data-type='method' style='display: none;'><a href="EventBus.html#emit">emit</a></li><li data-type='method' style='display: none;'><a href="EventBus.html#off">off</a></li><li data-type='method' style='display: none;'><a href="EventBus.html#on">on</a></li></ul></li><li><a href="FileNode.html">FileNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="FileNode.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#load">load</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#on">on</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#render">render</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#renderAudio">renderAudio</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#renderImage">renderImage</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#renderVideo">renderVideo</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#setFileTypeAndExtension">setFileTypeAndExtension</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#setNode">setNode</a></li><li data-type='method' style='display: none;'><a href="FileNode.html#setNodeByFile">setNodeByFile</a></li></ul></li><li><a href="FilePreview.html">FilePreview</a><ul class='methods'><li data-type='method' style='display: none;'><a href="FilePreview.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#find">find</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#init">init</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#load">load</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#on">on</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#preview">preview</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#reset">reset</a></li><li data-type='method' style='display: none;'><a href="FilePreview.html#unload">unload</a></li></ul></li><li><a href="FileUpload.html">FileUpload</a><ul class='methods'><li data-type='method' style='display: none;'><a href="FileUpload.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#addFile">addFile</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#getFileCount">getFileCount</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#getFileList">getFileList</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#load">load</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#on">on</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#reset">reset</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#unload">unload</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#validFileExtension">validFileExtension</a></li><li data-type='method' style='display: none;'><a href="FileUpload.html#validFileType">validFileType</a></li></ul></li><li><a href="Form.html">Form</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Form.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="Form.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="Form.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="Form.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="Form.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="Form.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="Form.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="Form.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="Form.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="Form.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="Form.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="Form.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="Form.html#findItem">findItem</a></li><li data-type='method' style='display: none;'><a href="Form.html#formatList">formatList</a></li><li data-type='method' style='display: none;'><a href="Form.html#setLabel">setLabel</a></li></ul></li><li><a href="MultipleList.html">MultipleList</a><ul class='methods'><li data-type='method' style='display: none;'><a href="MultipleList.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#findItem">findItem</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#formatList">formatList</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#getCheckItem">getCheckItem</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#init">init</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#load">load</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#on">on</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#setLabel">setLabel</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#setList">setList</a></li><li data-type='method' style='display: none;'><a href="MultipleList.html#updateCheckItem">updateCheckItem</a></li></ul></li><li><a href="MyNode.html">MyNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="MyNode.html#$init">$init</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#addClass">addClass</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#after">after</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#append">append</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#appendScript">appendScript</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#attr">attr</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#before">before</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#childNodes">childNodes</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#children">children</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#click">click</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#concat">concat</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#css">css</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#find">find</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#forEach">forEach</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#hasClass">hasClass</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#height">height</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#hide">hide</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#html">html</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#includes">includes</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#indexOf">indexOf</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#insert">insert</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#maxZIndex">maxZIndex</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#offset">offset</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#on">on</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#pop">pop</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#prepend">prepend</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#push">push</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#reduce">reduce</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#remove">remove</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#removeAttr">removeAttr</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#removeClass">removeClass</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#replaceWith">replaceWith</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#runCode">runCode</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#show">show</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#splice">splice</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#text">text</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#textAndTitle">textAndTitle</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#toggleClass">toggleClass</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#val">val</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#width">width</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#._string2Array">_string2Array</a></li><li data-type='method' style='display: none;'><a href="MyNode.html#._string2fragment">_string2fragment</a></li></ul></li><li><a href="Observe.html">Observe</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Observe.html#addCallback">addCallback</a></li><li data-type='method' style='display: none;'><a href="Observe.html#create">create</a></li><li data-type='method' style='display: none;'><a href="Observe.html#defineObject">defineObject</a></li><li data-type='method' style='display: none;'><a href="Observe.html#monitorMethodsOfArray">monitorMethodsOfArray</a></li><li data-type='method' style='display: none;'><a href="Observe.html#proxyArray">proxyArray</a></li><li data-type='method' style='display: none;'><a href="Observe.html#proxyObject">proxyObject</a></li></ul></li><li><a href="Pagination.html">Pagination</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Pagination.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#createOmit">createOmit</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#createPageLabel">createPageLabel</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#load">load</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#on">on</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#render">render</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#renderGotoPage">renderGotoPage</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#renderNextPage">renderNextPage</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#renderPage">renderPage</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#renderPreviousPage">renderPreviousPage</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#renderTip">renderTip</a></li><li data-type='method' style='display: none;'><a href="Pagination.html#valid">valid</a></li></ul></li><li><a href="Popup.html">Popup</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Popup.html#_mounted">_mounted</a></li></ul></li><li><a href="Radio.html">Radio</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Radio.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="Radio.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="Radio.html#findItem">findItem</a></li><li data-type='method' style='display: none;'><a href="Radio.html#formatList">formatList</a></li><li data-type='method' style='display: none;'><a href="Radio.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Radio.html#load">load</a></li><li data-type='method' style='display: none;'><a href="Radio.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="Radio.html#on">on</a></li><li data-type='method' style='display: none;'><a href="Radio.html#setLabel">setLabel</a></li><li data-type='method' style='display: none;'><a href="Radio.html#setList">setList</a></li><li data-type='method' style='display: none;'><a href="Radio.html#updateCheckItem">updateCheckItem</a></li></ul></li><li><a href="RootNode.html">RootNode</a></li><li><a href="Slider.html">Slider</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Slider.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="Slider.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="Slider.html#findItem">findItem</a></li><li data-type='method' style='display: none;'><a href="Slider.html#formatList">formatList</a></li><li data-type='method' style='display: none;'><a href="Slider.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Slider.html#load">load</a></li><li data-type='method' style='display: none;'><a href="Slider.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="Slider.html#on">on</a></li><li data-type='method' style='display: none;'><a href="Slider.html#setLabel">setLabel</a></li><li data-type='method' style='display: none;'><a href="Slider.html#update">update</a></li></ul></li><li><a href="Switch.html">Switch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Switch.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="Switch.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="Switch.html#findItem">findItem</a></li><li data-type='method' style='display: none;'><a href="Switch.html#formatList">formatList</a></li><li data-type='method' style='display: none;'><a href="Switch.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Switch.html#load">load</a></li><li data-type='method' style='display: none;'><a href="Switch.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="Switch.html#on">on</a></li><li data-type='method' style='display: none;'><a href="Switch.html#setLabel">setLabel</a></li></ul></li><li><a href="TaskQueue.html">TaskQueue</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TaskQueue.html#add">add</a></li><li data-type='method' style='display: none;'><a href="TaskQueue.html#execute">execute</a></li></ul></li><li><a href="TextNode.html">TextNode</a></li><li><a href="Time.html">Time</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Time.html#dateCount">dateCount</a></li><li data-type='method' style='display: none;'><a href="Time.html#firstDate">firstDate</a></li><li data-type='method' style='display: none;'><a href="Time.html#format">format</a></li><li data-type='method' style='display: none;'><a href="Time.html#forward">forward</a></li><li data-type='method' style='display: none;'><a href="Time.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Time.html#lastDate">lastDate</a></li><li data-type='method' style='display: none;'><a href="Time.html#transform">transform</a></li></ul></li><li><a href="Watcher.html">Watcher</a></li><li><a href="WaterMark.html">WaterMark</a><ul class='methods'><li data-type='method' style='display: none;'><a href="WaterMark.html#_after_destroyed">_after_destroyed</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_destroyed">_destroyed</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_has_child">_has_child</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_has_parent">_has_parent</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_instantiate_component">_instantiate_component</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_listen_bus">_listen_bus</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_listen_msg">_listen_msg</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_mount_component">_mount_component</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_mounted">_mounted</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_observe">_observe</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_reset_root">_reset_root</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#_send_msg">_send_msg</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#addLinkedNode">addLinkedNode</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#init">init</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#listenNodeChange">listenNodeChange</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#load">load</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="WaterMark.html#updateMark">updateMark</a></li></ul></li><li><a href="XMLNode.html">XMLNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="XMLNode.html#append">append</a></li><li data-type='method' style='display: none;'><a href="XMLNode.html#toJson">toJson</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">modules/base/util.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Ajax from './ajax.js';
import Observe from './observe.js';
import loading from '../../assets/img/loading.gif';

/**
 * 常用工具方法
 * @author wang.xin
 * @exports Util
 */
let Util = {};

/**
 * @description 动画
 */
Util.animation = {
    node: (function () {
        if (typeof document != 'undefined') {
            let container = document.createElement('div');

            container.style =
                'position: absolute; top: 0px; left: 0px; z-index: 99999; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.03);';
            container.innerHTML = `&lt;img src="${loading}" />&lt;/div>`;

            return container;
        }

        return null;
    })(),

    show() {
        document.body.appendChild(this.node);
    },

    hide() {
        this.node.remove();
    },
};

/**
 * @description 将 str-str-str 转换为strStrStr
 * @param {String} str 字符串
 * @returns {String}
 */
Util.toLowerUpper = function (str) {
    return str.replace(/(^-*)|(-*$)/g, '').replace(/-([a-z0-9])/g, (item, elem) => elem.toUpperCase());
};

/**
 * @description 将目标对象转换为数组
 * @param {Object} obj 目标对象
 * @returns {Array}
 */
Util.toArray = function (obj) {
    let res = [];

    if (Util.isArrayLike(obj)) {
        let i = 0,
            len = obj.length;

        for (; i &lt; len; i++) {
            res.push(obj[i]);
        }
    }

    return res;
};

/**
 * @description 比较两个对象内容是否相等
 * @param {Object} obj1 对象1
 * @param {Object} obj2 对象2
 * @returns {Boolean}
 */
Util.compare = function (obj1, obj2) {
    let res = true;

    if (Object.prototype.toString.call(obj1) === Object.prototype.toString.call(obj2)) {
        switch (Object.prototype.toString.call(obj1)) {
            case '[object Object]': // 对象
                if (Object.keys(obj1).length !== Object.keys(obj2).length) {
                    res = false;
                } else {
                    for (let key in obj1) {
                        if (!Util.compare(obj1[key], obj2[key])) {
                            res = false;
                            break;
                        }
                    }
                }
                break;

            case '[object Array]': // 数组
                if (obj1.length !== obj2.length) {
                    res = false;
                } else {
                    for (let i = 0; i &lt; obj1.length; i++) {
                        if (!Util.compare(obj1[i], obj2[i])) {
                            res = false;
                            break;
                        }
                    }
                }
                break;

            default:
                res = obj1 === obj2;
                break;
        }
    } else {
        res = false;
    }

    return res;
};

/**
 * @description 获取简易类型名称
 * @param {String} name 类名
 * @returns {String}
 */
Util.class2type = function (name) {
    return {
        '[object Boolean]': 'boolean',
        '[object Number]': 'number',
        '[object String]': 'string',
        '[object Function]': 'function',
        '[object Array]': 'array',
        '[object Date]': 'date',
        '[object RegExp]': 'regexp',
        '[object Object]': 'object',
        '[object Error]': 'error',
        '[object Symbol]': 'symbol',
    }[name];
};

/**
 * @description 获取数据类型
 * @param {*} obj 对象
 * @returns {String}
 */
Util.type = function (obj) {
    if (obj == null) {
        return obj + '';
    }

    return typeof obj === 'object' || typeof obj === 'function'
        ? Util.class2type(toString.call(obj)) || 'object'
        : typeof obj;
};

/**
 * @description 判断是否是函数
 * @param {*} obj 对象
 * @returns {Boolean}
 */
Util.isFunction = function (obj) {
    return typeof obj === 'function' &amp;&amp; typeof obj.nodeType !== 'number' &amp;&amp; typeof obj.item !== 'function';
};

/**
 * @description 判断是否是window
 * @param {*} obj 对象
 * @returns {Boolean}
 */
Util.isWindow = function (obj) {
    return obj != null &amp;&amp; obj === obj.window;
};

/**
 * @description 判断是否是类数组
 * @param {*} obj 对象
 * @returns {Boolean}
 */
Util.isArrayLike = function (obj) {
    if (typeof obj !== 'object') {
        return false;
    }

    let length = !!obj &amp;&amp; 'length' in obj &amp;&amp; obj.length,
        type = Util.class2type(toString.call(obj));

    if (Util.isFunction(obj) || Util.isWindow(obj)) {
        return false;
    }

    return type === 'array' || length === 0 || (typeof length === 'number' &amp;&amp; length > 0 &amp;&amp; length - 1 in obj);
};

/**
 * @description 重新封装请求
 * 接受 String、Object、Array 形式的入参，最后统一根据 arguments 属性对入参进行处理
 */
Util.request = (function () {
    let requestCount = 0;

    return function () {
        let opts = Ajax.formatParam(arguments) || {}, // 参数处理
            complete = opts.complete || (() => {}), // 缓存用户自定的 complete 属性
            filter = opts.filter === undefined ? true : opts.filter, // 是否进行 XSS 过滤【true 过滤，false 不过滤，默认为过滤】
            filterRule = opts.filterRule || null, // XSS 过滤规则
            icon = opts.icon === undefined ? true : opts.icon; // 是否显示加载图标【true 显示，false 不显示，默认为显示】

        // XSS 过滤
        if (filter === true) {
            opts.data = Ajax.filterHTML(opts.data, filterRule);
        }

        // 显示请求动画
        if (icon === true) {
            Util.animation.show();
        }

        // 请求结束
        opts.complete = function (data, xhr) {
            complete(data, xhr); // 用户自定操作

            // 数据过滤
            if (filter === true) {
                Ajax.filterHTML(data, filterRule);
            }

            // 关闭请求动画
            if (--requestCount === 0) {
                Util.animation.hide();
            }
        };

        requestCount++; // 请求加1

        return Ajax.request(opts);
    };
})();

/**
 * @description 创建监听器
 * @param {Object | Array | Function} target 监听对象
 * @param {String} property 属性名
 * @param {Function | Object} callback 回调函数
 * @param {*} value 值
 * @param {Boolean} immediate 是否在初始化的时候，执行回调函数，默认不执行
 * @param {Number} delay 延迟时间，单位毫秒，防抖操作，-1代表不进行防抖操作
 * @param {Boolean} isModifiable 是否可以改变数据类型
 * @param {Boolean} deep 是否进行深度监听
 * @return {Proxy}
 */
Util.monitor = function (target, property, callback, value, immediate, delay, isModifiable, deep) {
    if (arguments.length === 1) {
        return new Observe(...arguments).watcher;
    } else {
        return new Observe({
            target,
            property,
            callback,
            value,
            immediate,
            delay,
            isModifiable,
            deep,
        }).watcher;
    }
};

/**
 * @description 全屏
 * @param {DOM} element DOM元素
 */
Util.toFullScreen = function (element) {
    element = element || document.body;

    let fullScreen =
        element.requestFullscreen ||
        element.mozRequestFullScreen ||
        element.msRequestFullscreen ||
        element.webkitRequestFullscreen;

    fullScreen.call(element);
};

/**
 * @description 退出全屏
 */
Util.exitFullScreen = function () {
    let exitFullScreen =
        document.exitFullscreen ||
        document.mozCancelFullScreen ||
        document.msExitFullscreen ||
        document.webkitExitFullscreen;

    exitFullScreen.call(document);
};

/**
 * @description 防抖，该函数会从上一次被调用后，延迟 wait 毫秒后调用 callback
 * @param {Function} callback 回调函数
 * @param {Number} time 时间间隔
 */
Util.debounce = function (callback, time) {
    let timeId = null;

    return function () {
        timeId !== null &amp;&amp; clearTimeout(timeId);
        timeId = setTimeout(() => {
            callback.apply(this, arguments);
            timeId = null;
        }, time);
    };
};

/**
 * @description
 * 节流，在 wait 毫秒内最多执行 callback 一次&lt;br/>
 * 1. 在函数需要频繁触发时，函数执行一次后，只有大于设定的执行周期后才会执行第二次。&lt;br/>
 * 2. 适合多次事件按时间做平均分配。&lt;br/>
 * 场景：&lt;br/>
 * 1. 窗口调整；&lt;br/>
 * 2. 页面滚动；&lt;br/>
 * 3. DOM元素的拖拽功能实现；&lt;br/>
 * 4. 抢购疯狂点击&lt;br/>
 * @param {Function} callback 回调函数
 * @param {Number} wait 时间间隔
 */
Util.throttle = function (callback, wait) {
    let start = 0;

    return function (e) {
        let now = Date.now();

        if (now - start >= wait) {
            callback.call(this, e);
            start = now;
        }
    };
};

/**
 * @description 深拷贝
 * @param {*} target 拷贝对象
 * @param {Map} [map=new Map()] 缓存
 * @return {*} 拷贝结果
 */
Util.deepClone = function (target, map = new Map()) {
    // 检测数据类型
    if (typeof target === 'object' &amp;&amp; target != null) {
        // 设置缓存，避免出现循环嵌套
        let cache = map.get(target);
        if (cache) {
            return cache;
        }

        const result = Array.isArray(target) ? [] : {};
        map.set(target, result);
        if (Array.isArray(target)) {
            target.forEach((item, index) => {
                result[index] = deepClone(item, map);
            });
        } else {
            Object.keys(target).forEach((key) => {
                result[key] = deepClone(target[key], map);
            });
        }

        return result;
    } else {
        return target;
    }
};

/**
 * @description 将 Proxy 转为 JSON
 * @param {Proxy} proxy 代理对象
 * @return {JSON}
 */
Util.proxyToJSON = function (proxy) {
    return JSON.parse(JSON.stringify(proxy));
};

/**
 * @description 在 condition 为 true 的情况下，执行定时任务，否则进入下一次等待
 * @param {Function} callback 回调函数
 * @param {Number} timeout 时间间隔
 * @param {Function} condition 条件
 * @return {Number} 定时器ID
 */
Util.setTimeout = function (callback, timeout, condition) {
    condition = condition || (() => true);
    let fn = () => setTimeout(() => (condition() ? callback() : fn()), timeout);
    return fn();
};

/**
 * @description 计算表达式的值，对原生eval()进行扩展
 * @param {string} code 表达式
 */
Util.eval = function (code) {
    try {
        code = eval(code);
    } catch (err) {
        code = code;
    }
    return code;
};

/**
 * 计算字符串长度
 */
Util.calStringLength = function (str) {
    str = String(str);
    let length = 0;

    for (let i = 0; i &lt; str.length; i++) {
        let code = str.charCodeAt(i);
        if ((code >= 0 &amp;&amp; code &lt;= 255) || (code >= 0xff61 &amp;&amp; code &lt;= 0xff9f)) {
            // 非中文字符
            length++;
        } else {
            length += 2;
        }
    }

    return length;
};

/**
 * 图片转base64
 * @param {File | string} file 文件
 */
function convertImageToBase64(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();

        if (typeof file == 'string') {
            // 字符串
            const image = new Image();
            image.onload = function () {
                reader.onloadend = function () {
                    resolve(reader.result);
                };
                reader.onerror = reject;
                reader.readAsDataURL(image);
            };
            image.src = file; // 替换为图片的URL或者base64字符串
        } else {
            reader.onloadend = function () {
                resolve(reader.result);
            };
            reader.onerror = reject;
            reader.readAsDataURL(file);
        }
    });
}
Util.convertImageToBase64 = convertImageToBase64;

/**
 * 加密
 * @param {Object|String} code 明文
 * @returns {String}
 */
Util.encode = function (code) {
    try {
        code = JSON.stringify(code);
    } catch (err) {
        console.log(err);
    }

    return btoa(encodeURIComponent(code));
};

/**
 * 解密
 * @param {String} code 密文
 * @returns {String}
 */
Util.decode = function (code) {
    let result = decodeURIComponent(atob(code));

    try {
        result = JSON.parse(result);
    } catch (err) {
        console.log(err);
    }

    return result;
};

/**
 * 更新 URL 的查询参数
 * @param {String} [key='params'] 键
 * @param {Object|String} value 值
 * @param {Function} [encode] 加密方式
 * @returns {Object}
 */
Util.updateURLSearchParams = function (key = 'params', value, encode) {
    if (arguments.length &lt; 2 || typeof key !== 'string') {
        console.warn('updateURLSearchParams 入参不符合规则！');
        return;
    }

    let url = new URL(window.location);
    if (typeof encode === 'function') {
        value = encode(value);
    } else {
        try {
            value = JSON.stringify(value);
        } catch (err) {
            console.log(err);
        }
    }
    url.searchParams.set(key, value);
    window.history.pushState({}, '', url);

    return { key, value };
};

/**
 * 获取 URL 的查询参数值
 * @param {String} [key='params'] 键
 * @param {Function} [decode] 解密方式
 * @returns {object|String}
 */
Util.getURLSearchParams = function (key = 'params', decode) {
    let value = new URL(window.location).searchParams.get(key);

    if (typeof decode === 'function') {
        return decode(value);
    } else {
        try {
            value = JSON.parse(value);
        } catch (err) {
            console.log(err);
        }
    }

    return value;
};

export default Util;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Fri May 24 2024 20:08:25 GMT+0800 (GMT+08:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
